<div *ngIf="isCartEmpty" class="empty-cart-message">
  <div>
    <h2>Your cart is empty</h2>
    <p><a routerLink="/products">Continue Shopping</a></p>
  </div>
</div>

<div *ngIf="!isCartEmpty" class="cart-container">
  <div class="cart-panel">
    <h2>Shopping Cart</h2>

    <div *ngFor="let item of cartItems" class="cart-item">
      <img [src]="item.product.url" [alt]="item.product.name" />
      <div class="cart-item-details">
        <h3>{{ item.product.name }}</h3>
        <p>{{ item.product.price | currency }}</p>
        <div>
          <label for="quantity-{{ item.product.id }}">Quantity: </label>
          <input
            type="number"
            id="quantity-{{ item.product.id }}"
            [value]="item.quantity"
            (change)="updateQuantity(item.product.id, $event)"
            min="1"
            max="100"
            class="number-input"
          />
        </div>
        <p>
          <strong>Subtotal:</strong>
          {{ item.product.price * item.quantity | currency }}
        </p>
        <button (click)="removeFromCart(item.product.id)">Remove</button>
      </div>
    </div>

    <hr />
    <h3>Total: {{ cartTotal | currency }}</h3>
  </div>

  <div class="cart-panel">
    <h2>Checkout</h2>
    <form (ngSubmit)="submitOrder()">
      <div class="form-margin">
        <label for="fullName">Full Name:</label><br />
        <input
          type="text"
          id="fullName"
          [(ngModel)]="fullName"
          (ngModelChange)="validateFullName()"
          name="fullName"
          placeholder="Enter your full name"
          required
          minlength="3"
        />
        <div *ngIf="fullNameError" class="error-message">
          <small>{{ fullNameError }}</small>
        </div>
      </div>

      <div class="form-margin">
        <label for="address">Address:</label><br />
        <input
          type="text"
          id="address"
          [(ngModel)]="address"
          (ngModelChange)="validateAddress()"
          name="address"
          placeholder="Enter your address"
          required
          minlength="6"
        />
        <div *ngIf="addressError" class="error-message">
          <small>{{ addressError }}</small>
        </div>
      </div>

      <div class="form-margin">
        <label for="creditCard">Credit Card Number:</label><br />
        <input
          type="text"
          id="creditCard"
          [(ngModel)]="creditCard"
          (ngModelChange)="validateCreditCard()"
          name="creditCard"
          placeholder="Enter 16-digit card number"
          required
          minlength="16"
          maxlength="19"
        />
        <div *ngIf="creditCardError" class="error-message">
          <small>{{ creditCardError }}</small>
        </div>
      </div>

      <button type="submit" [disabled]="!isFormValid">
        Place Order
      </button>
    </form>
  </div>
</div>
